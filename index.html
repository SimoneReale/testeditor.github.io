<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tex[s]tEditor</title>
  </head>
  <body style = "background-image: linear-gradient(to left, #553c9a, #b393d3);">
    <main>



<style>
@import url('https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap');
.button-36 {
  background-image: linear-gradient(92.88deg, #455EB5 9.16%, #5643CC 43.89%, #673FD7 64.72%);
  border-radius: 8px;
  border-style: none;
  box-sizing: border-box;
  color: #FFFFFF;
  cursor: pointer;
  flex-shrink: 0;
  font-family: "Inter UI","SF Pro Display",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;
  font-size: 16px;
  font-weight: 500;
  height: 4rem;
  padding: 0 1.6rem;
  text-align: center;
  text-shadow: rgba(0, 0, 0, 0.25) 0 3px 8px;
  transition: all .5s;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.editor-elem {
  background-image: linear-gradient(92.88deg, #455EB5 9.16%, #5643CC 43.89%, #673FD7 64.72%);
  border-radius: 8px;
  border-style: none;
  box-sizing: border-box;
  color: #FFFFFF;
  cursor: pointer;
  flex-shrink: 0;
  font-family: "Inter UI","SF Pro Display",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;
  font-size: 16px;
  font-weight: 500;
  height: 4rem;
  padding: 0 1.6rem;
  text-align: center;
  text-shadow: rgba(0, 0, 0, 0.25) 0 3px 8px;
  transition: all .5s;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;

  display: flex;
  justify-content: center;
  align-items: center;
  
}

.editor-elem_label {
  border-radius: 8px;
  border-style: none;
  box-sizing: border-box;
  color: #FFFFFF;
  cursor: pointer;
  flex-shrink: 0;
  font-family: "Inter UI","SF Pro Display",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;
  font-size: 16px;
  font-weight: 500;
  height: 4rem;
  padding: 0 1.6rem;
  text-align: center;
  text-shadow: rgba(0, 0, 0, 0.25) 0 3px 8px;
  transition: all .5s;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;

  display: flex;
  justify-content: center;
  align-items: center;
  
}



.editor-elem:hover {
  box-shadow: rgba(80, 63, 205, 0.5) 0 1px 30px;
  transition-duration: .1s;
}

.button-36:hover {
  box-shadow: rgba(80, 63, 205, 0.5) 0 1px 30px;
  transition-duration: .1s;
}

@media (min-width: 768px) {
  .button-36 {
    padding: 0 2.6rem;
  }
}

.hide {
  width: 100%;
  height: 80vh;
  font-family: "Courier Prime", monospace;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0;
}

.butt {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.app {
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0;
  
}

.h1 {
  font-size: 5vw;
  font-weight: 300;
  color: #fefeff;
  border-right: 4px solid #000;
  animation: cursor 1s infinite step-end, typing 15s infinite steps(16);
  white-space: nowrap;
  overflow: hidden; 
}



@keyframes cursor{
  0%, 100%{border-color: transparent;}
  50%{border-color: rgb(252, 251, 251);}
}

@keyframes typing{
  0%{ width: 0ch} /*Text is hidden*/
  30%{ width: 14ch;} /*The enitre header will be typed out*/
  80%{ width: 14ch;} /*Text stays visible*/
  90%{ width: 0ch;} /*Text is deleted*/
  100%{ width: 0ch;} /*Text stays hidden*/
}

</style>



<script>

function vh(percent) {
  var h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
  return Math.ceil((percent * h) / 100);
}

function vw(percent) {
  var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
  return Math.ceil((percent * w) / 100);
}

function vmin(percent) {
  return Math.min(vh(percent), vw(percent));
}

function vmax(percent) {
  return Math.max(vh(percent), vw(percent));
}

  function resetSize(){
  
    document.getElementById("editor").style.width = vw(90).toString().concat('px');
    document.getElementById("editor").style.height = vh(80).toString().concat('px');
  
  }
  
  function makeDisappear() { 
    document.getElementById("butt_disappear").style.display="none";
    document.getElementById("hide").style.display="none"; 
    document.getElementById("app").style.display="block";
    resetSize(); 
  }

  function changeSize(){
    
    var width = document.getElementById("width_in").value.toString().concat('px');
    var height = document.getElementById("height_in").value.toString().concat('px');

    document.getElementById("editor").style.width = width;
    document.getElementById("editor").style.height = height;

  }


</script>


<div id = "hide" class = "hide">
  <h1 class = "h1">TEX[S]T EDITOR</h1>
</div>


<button id = "butt_disappear" class="button-36" onclick="makeDisappear()" role="button">Start</button>



<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

<style>



  .toolbar_mia {
  height: 8vh;
  width: 90vw;
  display: flex;
  float: left;
  flex-direction: row;
  background-color: transparent;
  font-family: "Courier Prime", monospace;
}

.elem_toolbar {
  float: left;
  font-size: 16px;
  color: white;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

</style>


<div id="app" style ="display:none">
  <div id="editor" class = "editor"></div>

  <div class = "toolbar_mia">
    <input type="button" class="editor-elem" id="dwn-btn" style = "height: 10vh;" value="Download text file"/>
    <input type="text" style="font-size:15px;" id="filename" style = "height: 10vh;"  value="your_filename.txt">
    
    <label class="editor-elem_label" for="width_in:">Width in pixel:</label>
    <input type="number" style="font-size:15px;" id="width_in" name="width_in" min="0">
    <label class="editor-elem_label" for="height_in:">Height in pixel:</label>
    <input type="number"  style="font-size:15px;" id="height_in" name="height_in" min="0">
    <input type="button" class="editor-elem" id="size_btn" style = "height: 10vh;" onclick="changeSize()" role="button" value= "Change window size"/>
    <input type="button" class="editor-elem" id="size_btn" style = "height: 10vh;" onclick="resetSize()" role="button" value= "Reset window size"/>
</div>

<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>


<!-- BULLET POINT NON CAMBIA DIMENSIONE -->
<!-- https://github.com/quilljs/quill/issues/409 -->

<style>

.ql-editor ul li::before {
  content: '- ';
}

.ql-container {

    font-size: 18px;
    height: 80vh;
    width: 90vw;
    margin: 0px;
    background-color: white;
    
  }


  .ql-toolbar {

    height: 8vh;
    width: 90vw;
    margin: 0px;
    background-color: white;
    
  }



  .ql-snow .ql-picker.ql-size .ql-picker-label::before,
  .ql-snow .ql-picker.ql-size .ql-picker-item::before {
    content: '18px';
  }

.ql-snow .ql-picker.ql-size .ql-picker-label.ql-active::before {
  content: attr(data-value);
}


.ql-snow .ql-picker.ql-size .ql-picker-item::before {
  content: attr(data-value);
}
</style>



<script>
  
  
  var fontSizeArr = [];
  for (var i = 8; i <= 100; i++) {
    fontSizeArr.push(i.toString().concat('px'));
  }
  
  var Size = Quill.import('attributors/style/size');
  Size.whitelist = fontSizeArr;
  Quill.register(Size, true);

  var toolbarOptions = [
    ['bold', 'italic', {'color' : []}, 'strike', 'underline'],
    [{'size': fontSizeArr}],
    [{'align' : ['', 'right', 'center']}],
    [{'list' : 'ordered'}, {'list' : 'bullet'}]
  ];


	
  var quill = new Quill('#editor', {
    modules: {
		  toolbar: toolbarOptions,
	  },
    formats : [
            //"background",
            "bold", 
            "color", 
            //"font", 
            //"code", 
            "italic", 
            //"link", 
            "size", 
            "strike", 
            //"script",
            "underline", 
            //"blockquote", 
            //"header",
            //"indent", 
            "list", 
            "align", 
            //"direction", 
            //"code-block", 
            //"formula", 
            //"image",
            //"video"
        ],
    theme: 'snow'
  });
</script>




</main>
    <script>

      function download(filename, text) {
        var element = document.createElement('a');
        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
        element.setAttribute('download', filename);
        
        element.style.display = 'none';
        document.body.appendChild(element);

        element.click();

        document.body.removeChild(element);
      }

      document.getElementById("dwn-btn").addEventListener("click", function(){
    

    var delta = quill.getContents();
    var lines_obj = new Object();
    lines_obj.lines = []
    lines_obj.dimensions = {"width" : document.getElementById("editor").style.width, "height" : document.getElementById("editor").style.height}

    delta.eachLine((line, attributes, i) => {

      if(line.ops.length != 0)
      {
        var obj = new Object();
        obj.content = line;
        obj.line_attributes  = attributes;
        lines_obj.lines.push(obj);
    }
      
      });

    
    var text = JSON.stringify(lines_obj);
    var filename = document.getElementById("filename").value;
    
    download(filename, text);
    }, false);

    </script>

    





  </body>
</html>
